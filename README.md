# WebApp
MVC

v.0.0.1 [Обслуживание веб-контента с помощью Spring MVC](https://spring.io/guides/gs/serving-web-content/),

* change thymeleaf to mustache

v.0.0.2 Доступ к данным с помощью MySQL

* Spring Boot JPA (Hibernate): добавляем базу данных в веб приложение на Java
* добавляем сообщения в бд
* фильтр сообщений по тегу
* постгрес в докере

v.0.0.3 Spring Boot Security: добавлена регистрация и авторизация пользователей в приложение

* Добавлен RegistrationController
* GreetingsController -> MainController
* add UserRepository
* add WebSecurityConfig
* registration.html

v.0.0.4 Hibernate связи между таблицами базы данных (one to many)

* Бин из спринг секъюрити UserDetails перенесен в UserService
* Добавлен автор в сообщения
* Отображение сообщений переведено в таблицу

v0.0.5 Фикс фильтра для сообщений
* Удален постмаппинг "/filter" перенесен в GetMapping "/main"

v0.0.6 Spring Boot Security: добавлена панель администратора и роли пользователей, ограничен доступ
* Добавлена страница пользователей и страница редактирования пользователей
* Настроена админка
* UserController.java отображение изменение и сохранение пользователей
* userEdit.html редактирование
* userList.html просмотр всех пользователей

v0.0.7 Загрузка файлов на сервер и раздача статики
* MainController в метод add добавлена загрузка изображений
* Message хранит путь к файлу
* В форму main добавлено создание и отображение изображения в сообщении
* Добавлены css
* В WebSecurityConfig добавлены настройки для доступа к стилям

v0.0.8 Добавлен navbar

v0.0.9 Spring Boot Mail: рассылка почты пользователям, активация аккаунта
* Добавлен емаил форму регистрации
* При регистрации отправляется код активации на почту со сылкой (сервис рассылки почты)
* Не активированным пользователям запрещен вход
* Секъюрные данные почтового сервиса вынесены в secret.properties

v0.0.10 Spring Boot FlyWay: миграции БД
* Подключен FlyWay
* Созданы миграции src/main/resources/db/migration
* Изменены настройки автогенерации таблиц в БД 
  - spring.jpa.generate-ddl=false - Отключает автоматическое создание таблиц в базе данных
  - spring.jpa.show-sql=false - Отключает вывод SQL-запросов в лог
  - spring.jpa.hibernate.ddl-auto=validate Значение validate говорит Hibernate о том, что он должен только проверить существующую схему базы данных, но не создавать или изменять ее. То есть Hibernate не будет создавать таблицы или изменять структуру базы данных, а только убедится, что она соответствует вашим сущностям.

v0.0.11 Фикс navbar
* подключен thymeleaf-extras-springsecurity6 для разделения логики шаблонов от роли пользователя
* кнопка выхода перенесена в навбар
* в навбаре отображается юзер
* в зависимости от роли отображаются элементы меню

v0.0.12 Добавлен профиль пользователя
* добавлена страница пользователя с возможностью смены email и password
* обработка профиля в UserController

v0.0.13 Штфрование паролей и валидация 
* Шифрование паролей
* Миграция бд с шифрованием существующих паролей
* Валидация моделей юзера и сообщений
* Валидация формы и отображение ошибок
* Фикс навбара - изменение отображения ссылок
* Изменение фронта таблицы и формы заполнения

v0.0.14 reCaptcha, rest client
* бин RestTemplate
* в контроллер регистрации добавлена формирование и обработка запросов капчи
* CaptchaResponseDto мапится из ответа гугла на запрос капчи
* в проперти добавлен путь запроса капчи и секретные ключи
* фрагмент для включения капчи на страницы
* https://www.google.com/recaptcha/admin/ регистрация капчи на гугле